<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fredoka&display=swap" rel="stylesheet">
  <title>Our Puzzle Journey</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Quicksand', sans-serif;
      background: linear-gradient(to bottom right, #ECCEFF, #34495E);
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      color: #fff;
    }

    .container {
      background: rgba(255, 255, 255, 0.1);
      padding: 2rem;
      border-radius: 16px;
      backdrop-filter: blur(12px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      text-align: center;
      max-width: 500px;
      width: 90%;
    }

    h1 {
      margin-bottom: 1rem;
      font-size: 1.5rem;
      font-weight: 150;
    }

    .riddle {
      display: none;
      margin-top: 2.5rem;
      margin-bottom: 1.5rem;
      font-family: 'Fredoka', sans-serif;
    }

    .riddle.active {
      display: block;
    }

    input {
      padding: 0.5rem;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      margin-top: 0.5rem;
      width: 100%;
    }

    button {
      padding: 0.6rem 1.2rem;
      background-color: #ff6b81;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      margin-top: 2rem;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background-color: #e55060;
    }

    .error {
      display: none;
      color: #ffbaba;
      margin-top: 0.5rem;
      font-size: 0.9rem;
    }

    .success {
      color: #b2ffb2;
    }

    sortable {
        list-style: none;
        padding: 0;
        margin: 0.5rem auto;
    }
      
    .sortable li {
        background: #fff3;
        padding: 0.75rem 1rem;
        margin: 0.5rem auto; /* ‚¨ÖÔ∏è This centers the pill */
        border-radius: 20px;
        cursor: grab;
        transition: background 0.3s;
        user-select: none;
        list-style: none;
        width: 100%;
        max-width: 400px;
        text-align: center;
        box-sizing: border-box;
        align-items: center;
    }

    .sortable li:active {
        cursor: grabbing;
      }

    .sortable li:hover {
        background-color: rgba(255, 255, 255, 0.25);
        transform: scale(1.03);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }
    
    .sortable li.correct {
        background-color: #BEFFC1; /* green */
        color: black;
    }

    .hint {
        font-size: 0.95rem;
        font-style: italic;
        transition: opacity 0.3s ease;
    }

    .starfruit {
        list-style: none;
        padding-left: 1em;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Solve the puzzle and unlock the next level!</h1>

    <div class="riddle active" id="riddle1">
        <p><strong>Memory lane üß†</strong> <br> <br> 
            That one extra food item which was supposed to be split in half, but wasn't.  </p>
        <input type="text" id="a1" placeholder="Your answer" />
        <div class="error" id="err1">Nope! Try again üßê</div>
        <div id="hint1" class="hint" style="margin-top: 0.75rem; color: #ffd;"> </div>
        <button onclick="checkAnswer(1)">Submit</button>
    </div>

    <div class="riddle" id="riddle2">
        <p>Okay, great! üéä <strong>Now, careful: </strong>  <br> <br>
        The correct answer to this riddle is a specific order of date ideas that <strong>I</strong> think will make you the happiest.  
        Place the below date ideas in a decreasing order of preference. "Sleeping" does not count as a date. üòÇ</p>
        <ul id="sortable" class="sortable">
          <li draggable="true">Zoo</li>
          <li draggable="true">Sunset + A long walk on the beach</li>
          <li draggable="true">Escape Room</li>
          <li draggable="true">Stargazing</li>
          <li draggable="true">Cooking together</li>
          <li draggable="true">Bowling</li>
        </ul>
        <div class="error" id="err4" style="color: #ffbaba; display: none;">Not yet, but you're close.</div>
        <button onclick="checkOrder()">Submit</button>
    </div>

    <div class="riddle" id="riddle3">
        <p><strong>Food trivia üç≤</strong> <br> <br>
            This is a food item. It is healthy, and one of your favourites. BUT,
it maybe one of my least favourite vegetables. üòÇ  </p>
        <input type="text" id="a3" placeholder="Your answer" />
        <div class="error" id="err3">Nope! Try again üßê</div>
        <div id="hint3" class="hint" style="margin-top: 0.75rem; color: #ffd;"> </div>
        <button onclick="checkAnswer(3)">Submit</button>
    </div>

    <div class="riddle" id="riddle4">
        <p><strong>About me üë∂üèº</strong> <br> <br>
             Asking you about my favourite fruit would be too simple. Let's see if you remember this? üòõ <br> <br>
Can you remember what I dressed up as for that one childhood fancy-dress competition?‚Äù  </p>
        <input type="text" id="a4" placeholder="Your answer" />
        <div class="error" id="err4">Nope! Try again üßê</div>
        <div id="hint4" class="hint" style="margin-top: 0.75rem; color: #ffd;"> </div>
        <button onclick="checkAnswer(4)">Submit</button>
    </div>

    <div class="riddle" id="riddle5">
        <p><strong>Okay noiceeee!</strong> <br> <br>
             This is a fruit, that we both enjoy. Here are some characteristics:
            <ul class="starfruit">
                <li> - It's sour </li>
                <li> - Not very readily available at grocery stores. </li>
                <li> - A unique shape and size.</li>
            </ul>
        <input type="text" id="a5" placeholder="Your answer" />
        <div class="error" id="err5">Hmm, not really.</div>
        <div id="hint5" class="hint" style="margin-top: 0.75rem; color: #ffd;"> </div>
        <button onclick="checkAnswer(5)">Submit</button>
    </div>

    <div class="riddle" id="riddle6">
        <p><strong>Music choices</strong> <br> <br>
             Choose the correct lyrics to this song:
            <ul class="starfruit">
                <li> - It's sour </li>
                <li> - Not very readily available at grocery stores. </li>
                <li> - A unique shape and size.</li>
            </ul>
        <input type="text" id="a6" placeholder="Your answer" />
        <div class="error" id="err6">Hmm, not really.</div>
        <button onclick="checkAnswer(6)">Submit</button>
    </div>

  <script>
    const answers = {
      1: "kulcha",
      3: "cauliflower",
      4: "banana",
      5: "starfruit"
    };

    let attempts = {
        1: 0
    };
      
    const hints = {
        1: [
          "Go back all the way upto 2018. üï∞Ô∏è",
          "It‚Äôs a type of Indian flatbread. üòõ",
          "You usually eat it with chole. üôÅ",
          "It rhymes with 'fulcha'."
        ],
        4: [
          "A type of food.",
          "How about a fruit?"
        ],
        5: [
            "It's yellowish-green in color.",
            "Think hard. It's known through its shape."
        ],
    };

    function checkAnswer(step) {
        const input = document.getElementById(`a${step}`).value.trim().toLowerCase();
        const error = document.getElementById(`err${step}`) || document.getElementById(`err${step}text`);
        const hintBox = document.getElementById(`hint${step}`);
        
        if (!(step in attempts)) {
            attempts[step] = 0;
        }
    
        if (input === answers[step]) {
          error.style.display = "none";
          hintBox.textContent = ""; // clear any existing hints
      
          confetti({
            particleCount: 100,
            spread: 70,
            origin: { y: 0.6 }
          });
      
          if (step === 5) {
            window.location.href = "surprise.html";
            return;
          }
      
          document.getElementById(`riddle${step}`).classList.remove("active");
          document.getElementById(`riddle${step + 1}`).classList.add("active");
      
        } else {
          error.style.display = "block";
          attempts[step]++;
      
          const hintList = hints[step];
          if (hintList && attempts[step] <= hintList.length) {
            hintBox.textContent = hintList[attempts[step] - 1];
          }
        }
    }
    
    const correctOrder = [
        "Zoo",
        "Sunset + A long walk on the beach",
        "Escape Room",
        "Stargazing",
        "Cooking together",
        "Bowling"
    ];

  const list = document.getElementById("sortable");
  let draggedItem = null;

  if (list) {
    list.addEventListener("dragstart", (e) => draggedItem = e.target);

    list.addEventListener("dragover", (e) => {
      e.preventDefault();
      const after = getDragAfterElement(list, e.clientY);
      if (!after) list.appendChild(draggedItem);
      else list.insertBefore(draggedItem, after);
    });

    list.querySelectorAll("li").forEach(item => {
      item.addEventListener("dragstart", () => item.classList.add("dragging"));
      item.addEventListener("dragend", () => item.classList.remove("dragging"));
    });
  }

  function getDragAfterElement(container, y) {
    const els = [...container.querySelectorAll("li:not(.dragging)")];
    return els.reduce((closest, el) => {
      const box = el.getBoundingClientRect();
      const offset = y - box.top - box.height / 2;
      return offset < 0 && offset > closest.offset
        ? { offset, element: el }
        : closest;
    }, { offset: Number.NEGATIVE_INFINITY }).element;
  }

  function checkOrder() {
    const items = [...list.querySelectorAll("li")];
    let correct = 0;

    items.forEach((item, index) => {
      if (item.textContent.trim() === correctOrder[index]) {
        item.classList.add("correct");
        correct++;
      } else {
        item.classList.remove("correct");
      }
    });

    const error = document.getElementById("err4");
    if (correct === correctOrder.length) {
        confetti({
            particleCount: 100,
            spread: 70,
            origin: { y: 0.6 }
          });
          
      error.style.display = "none";
      setTimeout(() => {
        document.getElementById("riddle2").classList.remove("active");
        document.getElementById("riddle3").classList.add("active");
      }, 800);
    } else {
      error.style.display = "block";
    }
  }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</body>
</html>